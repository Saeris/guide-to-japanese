---
import type { MarkdownHeading } from "astro/dist/@types/astro";

export interface Props {
    heading: MarkdownHeading
}

const { heading } = Astro.props;
---
<style>
    .toc-section {
      --depth: 2;
      --fill: inherit; 
      --stroke: var(--cn-400);
      --outline: transparent;
      --shadow: transparent;
      --text: var(--cn-700);

      &:hover {
        --fill: var(--cn-a50);
        --text: var(--cn-900);
        --stroke-width: 3px;
        --stroke: var(--cn-500);
      }

      &:has(a.active) {
        --stroke-width: 4px;
        --stroke: var(--cp-500);
        --text: var(--cp-700);
      }

      & a:focus-visible {
        --outline: var(--cp-500);
        --shadow: var(--cp-a200);
      }

      display: flex;
      align-items: center;
      margin-left: -2px;
      border-left: var(--stroke-width) solid var(--stroke);
      padding-left: calc((1ch * (var(--depth) - 1) - var(--stroke-width)));
      padding-block: 2px;
      font: 500 var(--fs-body) / 1.3 var(--family-display);
      box-sizing: border-box;

      a {
        display: flex;
        background-color: var(--fill);
        border-radius: 4px;
        border: 1px solid var(--outline);
        padding-inline: 4px;
        color: var(--text);
        text-decoration: none;

        &:focus {
          box-shadow: 0 0 0 1.5px var(--shadow);
          outline: none;
        }
      }
    }
</style>

<li class="toc-section" style={{ "--depth": heading.depth }}>
  <a href={'#' + heading.slug}>
    {heading.text}
  </a>
</li>